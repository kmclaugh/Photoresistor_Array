* C:\Program Files\LTC\LTspiceIV\Photoresistor_Array\Photoresistor_Array_Small.asc
Rload0 Read0 0 100k
XU0 Vcon0 A_Out0 arduino_output
Vcon0 Vcon0 0 {Vcon0}
D0 P001 Read0 D
Vl0 P002 0 {lux0_0}
XU1 Vcon1 A_Out1 arduino_output
Vcon1 Vcon1 0 {Vcon1}
D1 P003 Read0 D
Vl1 P004 0 {lux1_0}
XU2 Vcon2 A_Out2 arduino_output
Vcon2 Vcon2 0 {Vcon2}
D2 P005 Read0 D
Vl2 P006 0 {lux2_0}
XX0 P002 A_Out0 P001 photoresistor
XX1 P004 A_Out1 P003 photoresistor
XX2 P006 A_Out2 P005 photoresistor
D3 P007 Read1 D
Vl3 P008 0 {lux0_1}
D4 P009 Read1 D
Vl4 P010 0 {lux1_1}
D5 P011 Read1 D
Vl5 P012 0 {lux2_1}
XX3 P008 A_Out0 P007 photoresistor
XX4 P010 A_Out1 P009 photoresistor
XX5 P012 A_Out2 P011 photoresistor
D6 P013 Read2 D
Vl6 P014 0 {lux0_2}
D7 P015 Read2 D
Vl7 P016 0 {lux1_2}
D8 P017 Read2 D
Vl8 P018 0 {lux2_2}
XX6 P014 A_Out0 P013 photoresistor
XX7 P016 A_Out1 P015 photoresistor
XX8 P018 A_Out2 P017 photoresistor
Rload1 Read1 0 100k
Rload2 Read2 0 100k

* block symbol definitions
.subckt photoresistor Lux R+ R-
B1 R+ R- I=V(R+,R-)*V(l1)**{expon}/{rlum1}
E1 N001 0 Lux 0 1
Rdark R+ R- {Rdark}
C1 l1 0 Q=51.95u*ln(1+ABS(x)*7.8E-3)
C2 R+ R- 3.5p
D2 N001 l1 Dsw
R1 Lux 0 1K
.model dsw D(Ron=17k Roff=100k Vfwd=0)
.param Rdark=5MEG
.param expon=.55 rlum1=80k
.ends photoresistor

.model D D
.lib C:\Program Files\LTC\LTspiceIV\lib\cmp\standard.dio
.include C:\Program Files\LTC\LTspiceIV\lib\sub\Arduino_Output.sub
.op
*********************************** Lux Parameters***********************************
.param
+lux0_0=0 lux1_0=0 lux2_0=0
+lux0_1=0 lux1_1=0 lux2_1=0
+lux0_2=0 lux1_2=0 lux2_2=100
*********************************** End Lux Parameters*****************************
.param Rdark=1MEG Rlight=1
****************************** Voltage Parameters*******************************
.param
+vcon0=-5 vcon1=-5 vcon2=5 
*************************** End Voltage Parameters***************************
.backanno
.end
